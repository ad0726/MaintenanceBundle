FROM php:7.2

RUN apt update -yqq && \
    apt install git zip unzip -yqq > /dev/null

ARG XDEBUG_VERSION
RUN pecl install "xdebug-$XDEBUG_VERSION" > /dev/null && docker-php-ext-enable xdebug

RUN curl -sS https://getcomposer.org/installer | php && \
    mv composer.phar /usr/local/bin/composer

COPY "php.ini" "$PHP_INI_DIR/conf.d/php-custom.ini"

RUN apt-get install -y zlib1g-dev libicu-dev g++ > /dev/null \
    && docker-php-ext-configure intl \
    && docker-php-ext-install intl
